@using HäggesPizzeria.Models.IngredientViewModels
@using HäggesPizzeria.Services
@model IngedientDishViewModel
@inject IngredientService IngredientService

<div class="col-md-12">
    <div class="col-md-6">
        @foreach (var ingredient in @Model.Ingredients)
        {
            <div class="col-lg-12">
                <a class="btn btn-danger" 
                   onclick="updateDishIngredient('@Model.BaseDishId', '@ingredient.IngredientId', 'false', '@Model.IsOrderedDish')">Remove @ingredient.Name</a>
            </div>
        }
    </div>
    <div class="col-md-6">
        @foreach (var ingredient in IngredientService.GetAllUnusedIngredients(Model.Ingredients))
        {
            <div class="col-lg-8">
                <a class="btn btn-info" 
                   onclick="updateDishIngredient('@Model.BaseDishId', '@ingredient.IngredientId', 'true', '@Model.IsOrderedDish')">Add @ingredient.Name</a>
            </div>
            if (Model.IsOrderedDish && await IngredientService.NotInBaseDish(ingredient, Model.BaseDishId))
            {
                 <p class="col-md-4">@ingredient.AddExtraPrice kr</p>
            }
        }
    </div>
</div>
<div class="col-sm-12">
    @if (Model.IsOrderedDish)
    {
        <div>
            Dish price: @await IngredientService.CalculateDishPrice(Model.Ingredients, Model.BaseDishId)
        </div>
    }
</div>